configure_file (BotParam.py.in BotParam.py @ONLY)

set (INIT_PY ${CMAKE_CURRENT_BINARY_DIR}/__init__.py)

file (WRITE  ${INIT_PY} "\"\"\"CMAKE AUTOGENERATED FILE - DO NOT EDIT BY HAND!!\"\"\"\n")
file (APPEND ${INIT_PY} "from BotParam import *\n")
file (APPEND ${INIT_PY} "\n")

if (NOT EXISTS ${PYTHON_OUTPUT_PATH}/perls/BotParam)
  file (MAKE_DIRECTORY ${PYTHON_OUTPUT_PATH}/perls/BotParam)
endif ()

# build local definitions
add_custom_command (
  OUTPUT ${PYTHON_OUTPUT_PATH}/perls/BotParam/__init__.py ${PYTHON_OUTPUT_PATH}/perls/BotParam/BotParam.py
  COMMAND cp -f ${CMAKE_CURRENT_BINARY_DIR}/BotParam.py ${INIT_PY} ${PYTHON_OUTPUT_PATH}/perls/BotParam/.
  DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/BotParam.py
  WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
  )

add_custom_target (BotParam ALL
  DEPENDS ${PYTHON_OUTPUT_PATH}/perls/BotParam/__init__.py ${PYTHON_OUTPUT_PATH}/perls/BotParam/BotParam.py
  )

install (DIRECTORY ${PYTHON_OUTPUT_PATH}/perls/BotParam
   DESTINATION ${PYTHON_INSTALL_PATH}/perls
   DIRECTORY_PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
   PATTERN "*.pyc" EXCLUDE
  )

perls_python_add_custom_package (BotParam)
